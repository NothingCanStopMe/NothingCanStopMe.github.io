---
layout: 笔记
title: 简单顺时针算法的实现
date: 2019-12-25 09:12:04
tags: 笔记
---

最近在制作简易刚体描点工具的时候为了将点顺时针排列为烦恼,
想了好多算法模型都不能解决问题, 今天突然来了灵感有了两个算法方案
1. 将点按照y轴映射到圆上, 计算映射的点在圆上的弧度, 比较映射的点的弧度,
	即可知道先后顺序
2. 按照象限进行点的排列, 第一/四象限按照y轴从上往下排, 第二/三象限按照y轴从下往上排,
	这个算法模型参照的是机器扫描原理, 就如机器人一样选取一个轴(X,Y)进行递增式扫描,
    将扫描到的数据进行分析归纳后就得出简单结果

下面是第二个方案的具体实现逻辑:

{% codeblock %}
local function quadSort1(tab)
    table.sort(tab, function(a, b)
        if a[2] > b[2] then 
            return true
        elseif a[2] == b[2] then 
            return (a[1] < b[2])
        end
    end)
end

local function quadSort4(tab)
    table.sort(tab, function(a, b)
        if a[2] > b[2] then 
            return true
        elseif a[2] == b[2] then 
            return (a[1] > b[2])
        end
    end)
end

local function quadSort3(tab)
    table.sort(tab, function(a, b)
        if a[2] < b[2] then 
            return true
        elseif a[2] == b[2] then 
            return (a[1] > b[2])
        end
    end)
end

local function quadSort2(tab)
    table.sort(tab, function(a, b)
        if a[2] < b[2] then 
            return true
        elseif a[2] == b[2] then 
            return (a[1] < b[2])
        end
    end)
end

local function clockwiseSort(tab)
    local quad = {}
    for i = 1, 4 do
    	quad[i] = {}
    end

    for k,v in ipairs(tab) do
        if v[1] < 0 and v[2] >= 0 then 
            table.insert(quad[2], v)
        elseif v[1] >= 0 and v[2] > 0 then
            table.insert(quad[1], v)
        elseif v[1] > 0 and v[2] <= 0 then
            table.insert(quad[4], v)
        elseif v[1] <= 0 and v[2] < 0 then 
            table.insert(quad[3], v)
        end
    end

    quadSort1(quad[1])
    quadSort2(quad[2])
    quadSort3(quad[3])
    quadSort4(quad[4])
    local count = 1
    for k,v in ipairs(quad[2]) do
        tab[count] = v
        count = count + 1
    end

    for k,v in ipairs(quad[1]) do
        tab[count] = v
        count = count + 1
    end

    for k,v in ipairs(quad[4]) do
        tab[count] = v
        count = count + 1
    end

    for k,v in ipairs(quad[3]) do
        tab[count] = v
        count = count + 1
    end
end

clockwiseSort(tab)

{% endcodeblock %}